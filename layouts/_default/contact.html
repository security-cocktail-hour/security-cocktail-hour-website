{{ define "title" }}Contact | Security Cocktail Hour{{ end }}

{{ define "main" }}

<!-- Contact Hero -->
<section class="contact-hero">
  <div class="art-deco-pattern"></div>
  <div class="corner-accent corner-accent-tl"></div>
  <div class="corner-accent corner-accent-tr"></div>

  <div class="container">
    <div class="hero-content">
      <h1 class="hero-title">
        Get In <span>Touch</span>
      </h1>
      <p class="hero-subtitle">
        We'd love to hear from you. Whether you're interested in being a guest, exploring
        partnership opportunities, or just want to say hello—reach out!
      </p>
    </div>
  </div>
</section>

<!-- Contact Section -->
<section class="contact-section">
  <div class="container">
    <div class="contact-grid">

      <!-- Contact Form -->
      <div class="form-section">
        <h2>Send Us a Message</h2>

        <form action="https://formspree.io/f/mrbyrgrv" method="POST" id="contact-form">

          <div class="form-group">
            <label for="name" class="form-label">Name *</label>
            <input type="text" id="name" name="name" class="form-input" required>
          </div>

          <div class="form-group">
            <label for="email" class="form-label">Email *</label>
            <input type="email" id="email" name="email" class="form-input" required>
          </div>

          <div class="form-group">
            <label for="subject" class="form-label">Subject *</label>
            <select id="subject" name="subject" class="form-select" required>
              <option value="">Select a subject...</option>
              <option value="guest">Guest Submission</option>
              <option value="partnership">Partnership Opportunity</option>
              <option value="consulting">Consulting Inquiry</option>
              <option value="sponsorship">Sponsorship</option>
              <option value="press">Press Inquiry</option>
              <option value="general">General Question</option>
            </select>
          </div>

          <div class="form-group">
            <label for="message" class="form-label">Message *</label>
            <textarea id="message" name="message" class="form-textarea" rows="6" required></textarea>
          </div>

          <div id="form-status"></div>

          <button type="submit" class="submit-button">Send Message</button>

          <p class="form-note">
            * Required fields. We typically respond within 2-3 business days.
          </p>
        </form>
      </div>

      <!-- Contact Information -->
      <div class="info-section">
        <h2>Other Ways to Reach Us</h2>

        <div class="info-card">
          <h3>Email</h3>
          <p><a href="mailto:feedback@securitycocktailhour.com">feedback@securitycocktailhour.com</a></p>
        </div>

        <div class="info-card">
          <h3>Social Media</h3>
          <p>Follow us on LinkedIn:<br>
          <a href="https://www.linkedin.com/company/security-cocktail-hour/" target="_blank" rel="noopener">Security Cocktail Hour</a></p>
          <p>Follow us on Twitter/X:<br>
          <a href="https://twitter.com/SecCocktailHour" target="_blank" rel="noopener">@SecCocktailHour</a></p>
        </div>

        <div class="info-card">
          <h3>Response Time</h3>
          <p>
            We review all messages and aim to respond within 2-3 business days.
            For urgent matters, please use the email address above.
          </p>
        </div>

        <div class="guest-info">
          <h3>Interested in Being a Guest?</h3>
          <p>
            We're always looking for great people in cybersecurity and related fields with unique insights to share. If you'd like to be a guest on the show, please use the contact form and include:
          </p>
          <ul>
            <li>Topics you'd like to discuss</li>
            <li>Your area of expertise</li>
            <li>Your LinkedIn profile</li>
          </ul>
        </div>
      </div>

    </div>
  </div>
</section>

{{ end }}

{{ define "scripts" }}
<script>
// Enhanced Formspree submission handler with AJAX
document.getElementById('contact-form').addEventListener('submit', async function(e) {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);
  const submitButton = form.querySelector('button[type="submit"]');
  const statusDiv = document.getElementById('form-status');

  // Disable submit button and show loading state
  submitButton.disabled = true;
  submitButton.textContent = 'Sending...';
  statusDiv.innerHTML = '';

  try {
    const response = await fetch(form.action, {
      method: 'POST',
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    });

    if (response.ok) {
      // Success
      statusDiv.innerHTML = '<div class="status-message status-success">✓ Thank you! Your message has been sent successfully. We\'ll get back to you within 2-3 business days.</div>';
      form.reset();
    } else {
      // Error from Formspree
      const data = await response.json();
      if (data.errors) {
        statusDiv.innerHTML = '<div class="status-message status-error">⚠ ' + data.errors.map(error => error.message).join(', ') + '</div>';
      } else {
        throw new Error('Form submission failed');
      }
    }
  } catch (error) {
    // Network or other error
    statusDiv.innerHTML = '<div class="status-message status-error">⚠ There was a problem sending your message. Please try again or email us directly at feedback@securitycocktailhour.com</div>';
  } finally {
    // Re-enable submit button
    submitButton.disabled = false;
    submitButton.textContent = 'Send Message';
  }
});
</script>
{{ end }}
